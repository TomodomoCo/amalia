/*
Amalia. A content management system "for the rest of us".

Copyright (C) 2007-2011 Chris Van Patten, Nick Sampsell and Peter Upfold. 

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is furnished
to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all copies
or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,
INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A
PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE
SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.

Except as contained in this notice, the names of the authors or copyright holders
shall not be used in commercial advertising or to otherwise promote the sale,
commercial use or other commercial dealings regarding this Software without prior
written authorization from the the authors or copyright holders. Non-commercial use
of the authors and copyright holders' names is permitted, but it may be revoked on
a case-by-case basis if the authors wish to disconnect themselves from a particular use.
*/


// see combine js document


var editorHasBeenModified=false;var shouldWarnAboutUnsavedChanges=true;window.onload=function()
{tinyMCE.init({mode:'exact',elements:'editor',theme:'advanced',plugins:'inlinepopups,amalia_image,amalia_linker',theme_advanced_resizing:true,theme_advanced_toolbar_location:'top',theme_advanced_toolbar_align:'left',theme_advanced_buttons1:'cut,copy,paste,pastetext,|,undo,redo,|,amalia_linker,unlink,|,amalia_image,|,bullist,numlist,|,code',theme_advanced_buttons2:'formatselect,removeformat,|,bold,italic,underline,|,justifyleft,justifycenter,justifyright,justifyfull,|,forecolor',theme_advanced_buttons3:'',theme_advanced_blockformats:'p,h2,h3,blockquote,code',paste_remove_styles:'true',paste_remove_styles_if_webkit:'true',relative_urls:false,content_css:THEMES_URL+'/style.css',setup:function(ed){ed.onChange.add(function(ed,item){editorHasBeenModified=true;});},});};window.onbeforeunload=function(){if(shouldWarnAboutUnsavedChanges&&editorHasBeenModified)
{return'You have unsaved changes on this page. If you click OK, these changes will be lost.';}};$(document).ready(function()
{$('.dropdown-m ul').css('display','block');$('a.dropdown-r').css('display','block');$('a.dropdown-r').click(function()
{$('ul.select').toggleClass('selected');});$('.select li').click(function()
{if($('ul.select').hasClass('selected'))
{$('ul.select').removeClass('selected');var template=$(this).attr('id');$('input#template').val(template);$(this).prependTo('ul.select');}});$('.select li').each(function()
{if($(this).hasClass('picked'))
{$(this).prependTo('ul.select');}});});(function(d){d.each(["backgroundColor","borderBottomColor","borderLeftColor","borderRightColor","borderTopColor","color","outlineColor"],function(f,e){d.fx.step[e]=function(g){if(!g.colorInit){g.start=c(g.elem,e);g.end=b(g.end);g.colorInit=true}g.elem.style[e]="rgb("+[Math.max(Math.min(parseInt((g.pos*(g.end[0]-g.start[0]))+g.start[0]),255),0),Math.max(Math.min(parseInt((g.pos*(g.end[1]-g.start[1]))+g.start[1]),255),0),Math.max(Math.min(parseInt((g.pos*(g.end[2]-g.start[2]))+g.start[2]),255),0)].join(",")+")"}});function b(f){var e;if(f&&f.constructor==Array&&f.length==3){return f}if(e=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(f)){return[parseInt(e[1]),parseInt(e[2]),parseInt(e[3])]}if(e=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(f)){return[parseFloat(e[1])*2.55,parseFloat(e[2])*2.55,parseFloat(e[3])*2.55]}if(e=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(f)){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}if(e=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(f)){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}if(e=/rgba\(0, 0, 0, 0\)/.exec(f)){return a.transparent}return a[d.trim(f).toLowerCase()]}function c(g,e){var f;do{f=d.curCSS(g,e);if(f!=""&&f!="transparent"||d.nodeName(g,"body")){break}e="backgroundColor"}while(g=g.parentNode);return b(f)}var a={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0],transparent:[255,255,255]}})(jQuery);(function($){$.fn.closeDOMWindow=function(settings){if(!settings){settings={};}
var run=function(passingThis){if(settings.anchoredClassName){var $anchorClassName=$('.'+settings.anchoredClassName);$anchorClassName.fadeOut('fast',function(){if($.fn.draggable){$anchorClassName.draggable('destroy').trigger("unload").remove();}else{$anchorClassName.trigger("unload").remove();}});if(settings.functionCallOnClose){settings.functionCallAfterClose();}}else{var $DOMWindowOverlay=$('#DOMWindowOverlay');var $DOMWindow=$('#DOMWindow');$DOMWindowOverlay.fadeOut('fast',function(){$DOMWindowOverlay.trigger('unload').unbind().remove();});$DOMWindow.fadeOut('fast',function(){if($.fn.draggable){$DOMWindow.draggable("destroy").trigger("unload").remove();}else{$DOMWindow.trigger("unload").remove();}});$(window).unbind('scroll.DOMWindow');$(window).unbind('resize.DOMWindow');if($.fn.openDOMWindow.isIE6){$('#DOMWindowIE6FixIframe').remove();}
if(settings.functionCallOnClose){settings.functionCallAfterClose();}}};if(settings.eventType){return this.each(function(index){$(this).bind(settings.eventType,function(){run(this);return false;});});}else{run();}};$.closeDOMWindow=function(s){$.fn.closeDOMWindow(s);};$.fn.openDOMWindow=function(instanceSettings){var shortcut=$.fn.openDOMWindow;shortcut.defaultsSettings={anchoredClassName:'',anchoredSelector:'',draggable:0,eventType:null,fixedWindowY:100,functionCallOnOpen:null,functionCallOnClose:null,loader:0,loaderWidth:0,loaderHeight:13,loaderImagePath:'common/img/loadingAnimation.gif',modal:0,overlay:1,overlayColor:'#FFF',overlayOpacity:'70',windowHTTPType:'get',windowPadding:0,windowSource:'inline',windowSourceID:'',windowSourceURL:'',windowSourceAttrURL:'href'};var settings=$.extend({},$.fn.openDOMWindow.defaultsSettings,instanceSettings||{});shortcut.viewPortHeight=function(){return self.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;};shortcut.viewPortWidth=function(){return self.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;};shortcut.scrollOffsetHeight=function(){return self.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop;};shortcut.scrollOffsetWidth=function(){return self.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft;};shortcut.isIE6=typeof document.body.style.maxHeight==="undefined";var sizeOverlay=function(){var $DOMWindowOverlay=$('#DOMWindowOverlay');$DOMWindowOverlay.css({'height':'100%','width':'100%','position':'fixed'});};var centerDOMWindow=function(){var $DOMWindow=$('#DOMWindow');if(settings.height+50>shortcut.viewPortHeight()){$DOMWindow.css('left',Math.round(shortcut.viewPortWidth()/2)+shortcut.scrollOffsetWidth()-Math.round(($DOMWindow.outerWidth())/2));}else{$DOMWindow.css('left',Math.round(shortcut.viewPortWidth()/2)+shortcut.scrollOffsetWidth()-Math.round(($DOMWindow.outerWidth())/2));$DOMWindow.css('top',Math.round(shortcut.viewPortHeight()/2)+shortcut.scrollOffsetHeight()-Math.round(($DOMWindow.outerHeight())/2));}};var centerLoader=function(){var $DOMWindowLoader=$('#DOMWindowLoader');$DOMWindowLoader.css({'left':'50%','top':'50%','position':'fixed'});};var showDOMWindow=function(instance){if(arguments[0]){$('.'+instance+' #DOMWindowLoader').remove();$('.'+instance+' #DOMWindowContent').fadeIn('fast',function(){if(settings.functionCallOnOpen){settings.functionCallOnOpen();}});$('.'+instance+'.closeDOMWindow').click(function(){$.closeDOMWindow();return false;});}else{$('#DOMWindowLoader').remove();$('#DOMWindow').fadeIn('fast',function(){if(settings.functionCallOnOpen){settings.functionCallOnOpen();}});$('#DOMWindow .closeDOMWindow').click(function(){$.closeDOMWindow();return false;});}};var urlQueryToObject=function(s){var query={};s.replace(/b([^&=]*)=([^&=]*)b/g,function(m,a,d){if(typeof query[a]!='undefined'){query[a]+=','+d;}else{query[a]=d;}});return query;};var run=function(passingThis){settings.windowSourceID=$(passingThis).attr('href')||settings.windowSourceID;settings.windowSourceURL=$(passingThis).attr(settings.windowSourceAttrURL)||settings.windowSourceURL;settings.windowBGImage=settings.windowBGImage?'background-image:url('+settings.windowBGImage+')':'';var urlOnly,urlQueryObject;if(settings.positionType=='anchored'){var anchoredPositions=$(settings.anchoredSelector).position();var anchoredPositionX=anchoredPositions.left+settings.positionLeft;var anchoredPositionY=anchoredPositions.top+settings.positionTop;$('body').append('<div class="'+settings.anchoredClassName+'" style="'+settings.windowBGImage+';background-repeat:no-repeat;padding:'+settings.windowPadding+'px;overflow:auto;position:absolute;top:'+anchoredPositionY+'px;left:'+anchoredPositionX+'px;height:'+settings.height+'px;width:'+settings.width+'px;background-color:'+settings.windowBGColor+';border:'+settings.borderSize+'px solid '+settings.borderColor+';z-index:10001"><div id="DOMWindowContent" style="display:none"></div></div>');if(settings.loader&&settings.loaderImagePath!==''){$('.'+settings.anchoredClassName).append('<div id="DOMWindowLoader" style="width:'+settings.loaderWidth+'px;height:'+settings.loaderHeight+'px;"><img src="'+settings.loaderImagePath+'" /></div>');}
if($.fn.draggable){if(settings.draggable){$('.'+settings.anchoredClassName).draggable({cursor:'move'});}}
switch(settings.windowSource){case'inline':$('.'+settings.anchoredClassName+" #DOMWindowContent").append($(settings.windowSourceID).children());$('.'+settings.anchoredClassName).unload(function(){$('.'+settings.windowSourceID).append($('.'+settings.anchoredClassName+" #DOMWindowContent").children());});showDOMWindow(settings.anchoredClassName);break;case'iframe':$('.'+settings.anchoredClassName+" #DOMWindowContent").append('<iframe allowtransparency="true" frameborder="0" hspace="0" wspace="0" src="'+settings.windowSourceURL+'" name="DOMWindowIframe'+Math.round(Math.random()*1000)+'" style="width:100%;height:100%;border:none;background-color:transparent;" class="'+settings.anchoredClassName+'Iframe" ></iframe>');$('.'+settings.anchoredClassName+'Iframe').load(showDOMWindow(settings.anchoredClassName));break;case'ajax':if(settings.windowHTTPType=='post'){if(settings.windowSourceURL.indexOf("?")!==-1){urlOnly=settings.windowSourceURL.substr(0,settings.windowSourceURL.indexOf("?"));urlQueryObject=urlQueryToObject(settings.windowSourceURL);}else{urlOnly=settings.windowSourceURL;urlQueryObject={};}
$('.'+settings.anchoredClassName+" #DOMWindowContent").load(urlOnly,urlQueryObject,function(){showDOMWindow(settings.anchoredClassName);});}else{if(settings.windowSourceURL.indexOf("?")==-1){settings.windowSourceURL+='?';}
$('.'+settings.anchoredClassName+" #DOMWindowContent").load(settings.windowSourceURL+'&random='+(new Date().getTime()),function(){showDOMWindow(settings.anchoredClassName);});}
break;}}else{if(settings.overlay){$('body').append('<div id="DOMWindowOverlay" style="z-index:100;display:none;position:absolute;top:0;left:0;background-color:'+settings.overlayColor+';filter:alpha(opacity='+settings.overlayOpacity+');-moz-opacity: 0.'+settings.overlayOpacity+';opacity: 0.'+settings.overlayOpacity+';"></div>');sizeOverlay();var $DOMWindowOverlay=$('#DOMWindowOverlay');$DOMWindowOverlay.fadeIn('fast');if(!settings.modal){$DOMWindowOverlay.click(function(){$.closeDOMWindow();});}}
if(settings.loader&&settings.loaderImagePath!==''){$('body').append('<div id="DOMWindowLoader" style="z-index:10002;width:'+settings.loaderWidth+'px;height:'+settings.loaderHeight+'px;"><img src="'+settings.loaderImagePath+'" /></div>');centerLoader();}
$('body').append('<div id="DOMWindow"></div>');var $DOMWindow=$('#DOMWindow');$(window).bind('scroll.DOMWindow',function(){if(settings.overlay){sizeOverlay();}
if(settings.positionType=='centered'){centerDOMWindow();}
if(settings.positionType=='fixed'){fixedDOMWindow();}});$(window).bind('resize.DOMWindow',function(){if(settings.overlay){sizeOverlay();}
if(settings.positionType=='centered'){centerDOMWindow();}});switch(settings.windowSource){case'inline':$DOMWindow.append($(settings.windowSourceID).children());$DOMWindow.unload(function(){$(settings.windowSourceID).append($DOMWindow.children());});showDOMWindow();break;case'iframe':$DOMWindow.append('<iframe frameborder="0" hspace="0" wspace="0" src="'+settings.windowSourceURL+'" name="DOMWindowIframe'+Math.round(Math.random()*1000)+'" style="width:100%;height:100%;border:none;background-color:transparent;" id="DOMWindowIframe"></iframe>');$('#DOMWindowIframe').load(showDOMWindow());break;case'ajax':if(settings.windowHTTPType=='post'){if(settings.windowSourceURL.indexOf("?")!==-1){urlOnly=settings.windowSourceURL.substr(0,settings.windowSourceURL.indexOf("?"));urlQueryObject=urlQueryToObject(settings.windowSourceURL);}else{urlOnly=settings.windowSourceURL;urlQueryObject={};}
$DOMWindow.load(urlOnly,urlQueryObject,function(){showDOMWindow();});}else{if(settings.windowSourceURL.indexOf("?")==-1){settings.windowSourceURL+='?';}
$DOMWindow.load(settings.windowSourceURL+'&random='+(new Date().getTime()),function(){showDOMWindow();});}
break;}}};if(settings.eventType){return this.each(function(index){$(this).bind(settings.eventType,function(){run(this);return false;});});}else{run();}};$.openDOMWindow=function(s){$.fn.openDOMWindow(s);};})(jQuery);jQuery.fn.editInPlace=function(options){var settings={url:"",params:"",field_type:"text",select_options:"",textarea_cols:"25",textarea_rows:"10",bg_over:"#ffc",bg_out:"transparent",saving_text:"Saving...",saving_image:"",default_text:"[add a title]",select_text:"Choose new value",value_required:null,element_id:"element_id",update_value:"update_value",original_html:"original_html",save_button:'<div id="rename-submit-hold"><button type="submit" name="submit" id="rename-submit"><div class="button-side inplace_save"></div>Submit</button>',cancel_button:'',show_buttons:true,on_blur:null,callback:null,success:null,error:function(request){alert("Failed to save value: "+request.responseText||'Unspecified Error');}};if(options){jQuery.extend(settings,options);}
if(settings.saving_image!=""){var loading_image=new Image();loading_image.src=settings.saving_image;}
String.prototype.trim=function(){return this.replace(/^\s+/,'').replace(/\s+$/,'');};String.prototype.escape_html=function(){return this.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;");};return this.each(function(){if(jQuery(this).html()=="")jQuery(this).html(settings.default_text);var editing=false;var original_element=jQuery(this);var click_count=0;jQuery(this).mouseover(function(){if(!editing)
jQuery(this).css("background",settings.bg_over);}).focus(function(){jQuery(this).css("background",settings.bg_out);}).click(function(){}).mouseout(function(){jQuery(this).css("background",settings.bg_out);}).click(function(){jQuery(this).css("background",settings.bg_out);click_count++;if(!editing)
{jQuery(this).siblings('.filename').hide();editing=true;var original_html=jQuery(this).html();var buttons_code=(settings.show_buttons)?settings.save_button+' '+settings.cancel_button:'';if(original_html==settings.default_text)jQuery(this).html('');if(settings.field_type=="textarea")
{var use_field_type='<textarea name="inplace_value" class="inplace_field" rows="'+settings.textarea_rows+'" cols="'+settings.textarea_cols+'">'+jQuery(this).text().trim().escape_html()+'</textarea>';}
else if(settings.field_type=="text")
{var use_field_type='<input type="text" name="inplace_value" class="inplace_field" id="rename-input" value="'+
jQuery(this).text().trim().escape_html()+'" />';}
else if(settings.field_type=="select")
{var optionsArray=settings.select_options.split(',');var use_field_type='<select name="inplace_value" class="inplace_field"><option value="">'+settings.select_text+'</option>';for(var i=0;i<optionsArray.length;i++){var optionsValuesArray=optionsArray[i].split(':');var use_value=optionsValuesArray[1]||optionsValuesArray[0];var selected=use_value==original_html?'selected="selected" ':'';use_field_type+='<option '+selected+'value="'+use_value.trim().escape_html()+'">'+optionsValuesArray[0].trim().escape_html()+'</option>';}
use_field_type+='</select>';}
jQuery(this).html('<span class="filetitle"><form id="rename-form">'+use_field_type+' '+buttons_code+'</form></span>');}
if(click_count==1)
{function cancelAction()
{editing=false;click_count=0;original_element.css("background",settings.bg_out);original_element.siblings('.filename').show();original_element.html(original_html);return false;}
function saveAction()
{original_element.css("background",settings.bg_out);original_element.siblings('.filename').show();var this_elem=jQuery(this);var new_html=$('#rename-input').val();if(settings.saving_image!=""){var saving_message='<img src="'+settings.saving_image+'" alt="Saving..." />';}else{var saving_message=settings.saving_text;}
original_element.html(saving_message);if(settings.params!=""){settings.params="&"+settings.params;}
if(settings.callback){html=settings.callback(original_element.attr("id"),new_html,original_html,settings.params);editing=false;click_count=0;if(html){original_element.html(html||new_html);}else{alert("Failed to save value: "+new_html);original_element.html(original_html);}}else if(settings.value_required&&(new_html==""||new_html==undefined)){editing=false;click_count=0;original_element.html(original_html);alert("Error: You must enter a value to save this field");}else{jQuery.ajax({url:settings.url,type:"POST",data:settings.update_value+'='+new_html+'&'+settings.element_id+'='+original_element.attr("id")+settings.params+'&'+settings.original_html+'='+original_html,dataType:"html",complete:function(request){editing=false;click_count=0;},success:function(html){var new_text=html||settings.default_text;original_element.html(new_text);if(settings.success)settings.success(html,original_element);},error:function(request){original_element.html(original_html);if(settings.error)settings.error(request,original_element);}});}
return false;}
original_element.children("form").children(".inplace_field").focus().select();original_element.children("form").children(".inplace_cancel").click(cancelAction);$("#rename-submit").click(saveAction);$(document).keyup(function(event){if(event.keyCode==27){cancelAction();}});$("#rename-form").submit(saveAction);}});});};(function($){$.fn.editable=function(target,options){if('disable'==target){$(this).data('disabled.editable',true);return;}
if('enable'==target){$(this).data('disabled.editable',false);return;}
if('destroy'==target){$(this).unbind($(this).data('event.editable')).removeData('disabled.editable').removeData('event.editable');return;}
var settings=$.extend({},$.fn.editable.defaults,{target:target},options);var plugin=$.editable.types[settings.type].plugin||function(){};var submit=$.editable.types[settings.type].submit||function(){};var buttons=$.editable.types[settings.type].buttons||$.editable.types['defaults'].buttons;var content=$.editable.types[settings.type].content||$.editable.types['defaults'].content;var element=$.editable.types[settings.type].element||$.editable.types['defaults'].element;var reset=$.editable.types[settings.type].reset||$.editable.types['defaults'].reset;var callback=settings.callback||function(){};var onedit=settings.onedit||function(){};var onsubmit=settings.onsubmit||function(){};var onreset=settings.onreset||function(){};var onerror=settings.onerror||reset;if(settings.tooltip){$(this).attr('title',settings.tooltip);}
settings.autowidth='auto'==settings.width;settings.autoheight='auto'==settings.height;return this.each(function(){var self=this;var savedwidth=$(self).width();var savedheight=$(self).height();$(this).data('event.editable',settings.event);if(!$.trim($(this).html())){$(this).html(settings.placeholder);}
$(this).bind(settings.event,function(e){if(true===$(this).data('disabled.editable')){return;}
if(self.editing){return;}
if(false===onedit.apply(this,[settings,self])){return;}
e.preventDefault();e.stopPropagation();if(settings.tooltip){$(self).removeAttr('title');}
if(0==$(self).width()){settings.width=savedwidth;settings.height=savedheight;}else{if(settings.width!='none'){settings.width=settings.autowidth?$(self).width():settings.width;}
if(settings.height!='none'){settings.height=settings.autoheight?$(self).height():settings.height;}}
if($(this).html().toLowerCase().replace(/(;|"|\/)/g,'')==settings.placeholder.toLowerCase().replace(/(;|"|\/)/g,'')){$(this).html('');}
self.editing=true;self.revert=$(self).html();$(self).html('');var form=$('<form id="rename-form"/>');if(settings.cssclass){if('inherit'==settings.cssclass){form.attr('class',$(self).attr('class'));}else{form.attr('class',settings.cssclass);}}
if(settings.style){if('inherit'==settings.style){form.attr('style',$(self).attr('style'));form.css('display',$(self).css('display'));}else{form.attr('style',settings.style);}}
var input=element.apply(form,[settings,self]);var input_content;if(settings.loadurl){var t=setTimeout(function(){input.disabled=true;content.apply(form,[settings.loadtext,settings,self]);},100);var loaddata={};loaddata[settings.id]=self.id;if($.isFunction(settings.loaddata)){$.extend(loaddata,settings.loaddata.apply(self,[self.revert,settings]));}else{$.extend(loaddata,settings.loaddata);}
$.ajax({type:settings.loadtype,url:settings.loadurl,data:loaddata,async:false,success:function(result){window.clearTimeout(t);input_content=result;input.disabled=false;}});}else if(settings.data){input_content=settings.data;if($.isFunction(settings.data)){input_content=settings.data.apply(self,[self.revert,settings]);}}else{input_content=self.revert;}
content.apply(form,[input_content,settings,self]);input.attr('name',settings.name);buttons.apply(form,[settings,self]);$(self).append(form);plugin.apply(form,[settings,self]);$(':input:visible:enabled:first',form).focus();if(settings.select){input.select();}
input.keydown(function(e){if(e.keyCode==27){e.preventDefault();reset.apply(form,[settings,self]);}});var t;if('cancel'==settings.onblur){input.blur(function(e){t=setTimeout(function(){reset.apply(form,[settings,self]);},500);});}else if('submit'==settings.onblur){input.blur(function(e){t=setTimeout(function(){form.submit();},200);});}else if($.isFunction(settings.onblur)){input.blur(function(e){settings.onblur.apply(self,[input.val(),settings]);});}else{input.blur(function(e){});}
form.submit(function(e){if(t){clearTimeout(t);}
e.preventDefault();if(false!==onsubmit.apply(form,[settings,self])){if(false!==submit.apply(form,[settings,self])){if($.isFunction(settings.target)){var str=settings.target.apply(self,[input.val(),settings]);$(self).html(str);self.editing=false;callback.apply(self,[self.innerHTML,settings]);if(!$.trim($(self).html())){$(self).html(settings.placeholder);}}else{var submitdata={};submitdata[settings.name]=input.val();submitdata[settings.id]=self.id;if($.isFunction(settings.submitdata)){$.extend(submitdata,settings.submitdata.apply(self,[self.revert,settings]));}else{$.extend(submitdata,settings.submitdata);}
if('PUT'==settings.method){submitdata['_method']='put';}
$(self).html(settings.indicator);var ajaxoptions={type:'POST',data:submitdata,dataType:'html',url:settings.target,success:function(result,status){if(ajaxoptions.dataType=='html'){$(self).html(result);}
self.editing=false;callback.apply(self,[result,settings]);if(!$.trim($(self).html())){$(self).html(settings.placeholder);}},error:function(xhr,status,error){onerror.apply(form,[settings,self,xhr]);}};$.extend(ajaxoptions,settings.ajaxoptions);$.ajax(ajaxoptions);}}}
$(self).attr('title',settings.tooltip);return false;});});this.reset=function(form){if(this.editing){if(false!==onreset.apply(form,[settings,self])){$(self).html(self.revert);self.editing=false;if(!$.trim($(self).html())){$(self).html(settings.placeholder);}
if(settings.tooltip){$(self).attr('title',settings.tooltip);}}}};});};$.editable={types:{defaults:{element:function(settings,original){var input=$('<input type="hidden"></input>');$(this).append(input);return(input);},content:function(string,settings,original){$(':input:first',this).val(string);},reset:function(settings,original){original.reset(this);},buttons:function(settings,original){var form=this;if(settings.submit){if(settings.submit.match(/>$/)){var submit=$(settings.submit).click(function(){if(submit.attr("type")!="submit"){form.submit();}});}else{var submit=$('<input type="submit" name="submit" id="rename-submit" value="Submit"/>');submit.html(settings.submit);}
$(this).append(submit);}
if(settings.cancel){if(settings.cancel.match(/>$/)){var cancel=$(settings.cancel);}else{var cancel=$('<button type="cancel" />');cancel.html(settings.cancel);}
$(this).append(cancel);$(cancel).click(function(event){if($.isFunction($.editable.types[settings.type].reset)){var reset=$.editable.types[settings.type].reset;}else{var reset=$.editable.types['defaults'].reset;}
reset.apply(form,[settings,original]);return false;});}}},text:{element:function(settings,original){var input=$('<input id="rename-input" type="text" name="newtitle"/>');if(settings.width!='none'){input.width(settings.width);}
if(settings.height!='none'){input.height(settings.height);}
input.attr('autocomplete','off');$(this).append(input);return(input);}},textarea:{element:function(settings,original){var textarea=$('<textarea />');if(settings.rows){textarea.attr('rows',settings.rows);}else if(settings.height!="none"){textarea.height(settings.height);}
if(settings.cols){textarea.attr('cols',settings.cols);}else if(settings.width!="none"){textarea.width(settings.width);}
$(this).append(textarea);return(textarea);}},select:{element:function(settings,original){var select=$('<select />');$(this).append(select);return(select);},content:function(data,settings,original){if(String==data.constructor){eval('var json = '+data);}else{var json=data;}
for(var key in json){if(!json.hasOwnProperty(key)){continue;}
if('selected'==key){continue;}
var option=$('<option />').val(key).append(json[key]);$('select',this).append(option);}
$('select',this).children().each(function(){if($(this).val()==json['selected']||$(this).text()==$.trim(original.revert)){$(this).attr('selected','selected');}});if(!settings.submit){var form=this;$('select',this).change(function(){form.submit();});}}}},addInputType:function(name,input){$.editable.types[name]=input;}};$.fn.editable.defaults={name:'value',id:'id',type:'text',width:'auto',height:'auto',event:'click.editable',onblur:'cancel',loadtype:'GET',loadtext:'Loading...',placeholder:'Click to edit',loaddata:{},submitdata:{},ajaxoptions:{}};})(jQuery);(function($){$.event.special.mousewheel={setup:function(){var handler=$.event.special.mousewheel.handler;if($.browser.mozilla)
$(this).bind('mousemove.mousewheel',function(event){$.data(this,'mwcursorposdata',{pageX:event.pageX,pageY:event.pageY,clientX:event.clientX,clientY:event.clientY});});if(this.addEventListener)
this.addEventListener(($.browser.mozilla?'DOMMouseScroll':'mousewheel'),handler,false);else
this.onmousewheel=handler;},teardown:function(){var handler=$.event.special.mousewheel.handler;$(this).unbind('mousemove.mousewheel');if(this.removeEventListener)
this.removeEventListener(($.browser.mozilla?'DOMMouseScroll':'mousewheel'),handler,false);else
this.onmousewheel=function(){};$.removeData(this,'mwcursorposdata');},handler:function(event){var args=Array.prototype.slice.call(arguments,1);event=$.event.fix(event||window.event);$.extend(event,$.data(this,'mwcursorposdata')||{});var delta=0,returnValue=true;if(event.wheelDelta)delta=event.wheelDelta/120;if(event.detail)delta=-event.detail/3;event.data=event.data||{};event.type="mousewheel";args.unshift(delta);args.unshift(event);return $.event.handle.apply(this,args);}};$.fn.extend({mousewheel:function(fn){return fn?this.bind("mousewheel",fn):this.trigger("mousewheel");},unmousewheel:function(fn){return this.unbind("mousewheel",fn);}});})(jQuery);if(jQuery)(function(jQuery){jQuery.extend(jQuery.fn,{uploadify:function(options){jQuery(this).each(function(){settings=jQuery.extend({id:jQuery(this).attr('id'),uploader:'uploadify.swf',script:'uploadify.php',expressInstall:null,folder:'',height:30,width:110,cancelImg:'cancel.png',wmode:'opaque',scriptAccess:'sameDomain',fileDataName:'Filedata',method:'POST',queueSizeLimit:999,simUploadLimit:1,queueID:false,displayData:'percentage',onInit:function(){},onSelect:function(){},onQueueFull:function(){},onCheck:function(){},onCancel:function(){},onError:function(){},onProgress:function(){},onComplete:function(){},onAllComplete:function(){}},options);var pagePath=location.pathname;pagePath=pagePath.split('/');pagePath.pop();pagePath=pagePath.join('/')+'/';var data={};data.uploadifyID=settings.id;data.pagepath=pagePath;if(settings.buttonImg)data.buttonImg=escape(settings.buttonImg);if(settings.buttonText)data.buttonText=escape(settings.buttonText);if(settings.rollover)data.rollover=true;data.script=settings.script;data.folder=escape(settings.folder);if(settings.scriptData){var scriptDataString='';for(var name in settings.scriptData){scriptDataString+='&'+name+'='+settings.scriptData[name];}
data.scriptData=escape(scriptDataString.substr(1));}
data.width=settings.width;data.height=settings.height;data.wmode=settings.wmode;data.method=settings.method;data.queueSizeLimit=settings.queueSizeLimit;data.simUploadLimit=settings.simUploadLimit;if(settings.hideButton)data.hideButton=true;if(settings.fileDesc)data.fileDesc=settings.fileDesc;if(settings.fileExt)data.fileExt=settings.fileExt;if(settings.multi)data.multi=true;if(settings.auto)data.auto=true;if(settings.sizeLimit)data.sizeLimit=settings.sizeLimit;if(settings.checkScript)data.checkScript=settings.checkScript;if(settings.fileDataName)data.fileDataName=settings.fileDataName;if(settings.queueID)data.queueID=settings.queueID;if(settings.onInit()!==false){jQuery(this).css('display','none');jQuery(this).after('<div id="'+jQuery(this).attr('id')+'Uploader"></div>');swfobject.embedSWF(settings.uploader,settings.id+'Uploader',settings.width,settings.height,'9.0.24',settings.expressInstall,data,{'quality':'high','wmode':settings.wmode,'allowScriptAccess':settings.scriptAccess});if(settings.queueID==false){jQuery("#"+jQuery(this).attr('id')+"Uploader").after('<div id="'+jQuery(this).attr('id')+'Queue" class="uploadifyQueue"></div>');}}
if(typeof(settings.onOpen)=='function'){jQuery(this).bind("uploadifyOpen",settings.onOpen);}
jQuery(this).bind("uploadifySelect",{'action':settings.onSelect,'queueID':settings.queueID},function(event,ID,fileObj){if(event.data.action(event,ID,fileObj)!==false){var byteSize=Math.round(fileObj.size/1024*100)*.01;var suffix='KB';if(byteSize>1000){byteSize=Math.round(byteSize*.001*100)*.01;suffix='MB';}
var sizeParts=byteSize.toString().split('.');if(sizeParts.length>1){byteSize=sizeParts[0]+'.'+sizeParts[1].substr(0,2);}else{byteSize=sizeParts[0];}
if(fileObj.name.length>20){fileName=fileObj.name.substr(0,20)+'...';}else{fileName=fileObj.name;}
queue='#'+jQuery(this).attr('id')+'Queue';if(event.data.queueID){queue='#'+event.data.queueID;}
jQuery(queue).append('<div id="'+jQuery(this).attr('id')+ID+'" class="uploadifyQueueItem">\
        <div class="cancel">\
         <a href="javascript:jQuery(\'#'+jQuery(this).attr('id')+'\').uploadifyCancel(\''+ID+'\')"><img src="'+settings.cancelImg+'" border="0" /></a>\
        </div>\
        <span class="fileName">'+fileName+' ('+byteSize+suffix+')</span><span class="percentage"></span>\
        <div class="uploadifyProgress">\
         <div id="'+jQuery(this).attr('id')+ID+'ProgressBar" class="uploadifyProgressBar"><!--Progress Bar--></div>\
        </div>\
       </div>');}});if(typeof(settings.onSelectOnce)=='function'){jQuery(this).bind("uploadifySelectOnce",settings.onSelectOnce);}
jQuery(this).bind("uploadifyQueueFull",{'action':settings.onQueueFull},function(event,queueSizeLimit){if(event.data.action(event,queueSizeLimit)!==false){alert('The queue is full.  The max size is '+queueSizeLimit+'.');}});jQuery(this).bind("uploadifyCheckExist",{'action':settings.onCheck},function(event,checkScript,fileQueueObj,folder,single){var postData=new Object();postData=fileQueueObj;postData.folder=pagePath+folder;if(single){for(var ID in fileQueueObj){var singleFileID=ID;}}
jQuery.post(checkScript,postData,function(data){for(var key in data){if(event.data.action(event,checkScript,fileQueueObj,folder,single)!==false){var replaceFile=confirm("Do you want to replace the file "+data[key]+"?");if(!replaceFile){document.getElementById(jQuery(event.target).attr('id')+'Uploader').cancelFileUpload(key,true,true);}}}
if(single){document.getElementById(jQuery(event.target).attr('id')+'Uploader').startFileUpload(singleFileID,true);}else{document.getElementById(jQuery(event.target).attr('id')+'Uploader').startFileUpload(null,true);}},"json");});jQuery(this).bind("uploadifyCancel",{'action':settings.onCancel},function(event,ID,fileObj,data,clearFast){if(event.data.action(event,ID,fileObj,data,clearFast)!==false){var fadeSpeed=(clearFast==true)?0:250;jQuery("#"+jQuery(this).attr('id')+ID).fadeOut(fadeSpeed,function(){jQuery(this).remove()});}});if(typeof(settings.onClearQueue)=='function'){jQuery(this).bind("uploadifyClearQueue",settings.onClearQueue);}
var errorArray=[];jQuery(this).bind("uploadifyError",{'action':settings.onError},function(event,ID,fileObj,errorObj){if(event.data.action(event,ID,fileObj,errorObj)!==false){var fileArray=new Array(ID,fileObj,errorObj);errorArray.push(fileArray);jQuery("#"+jQuery(this).attr('id')+ID+" .percentage").text(" - "+errorObj.type+" Error");jQuery("#"+jQuery(this).attr('id')+ID).addClass('uploadifyError');}});jQuery(this).bind("uploadifyProgress",{'action':settings.onProgress,'toDisplay':settings.displayData},function(event,ID,fileObj,data){if(event.data.action(event,ID,fileObj,data)!==false){jQuery("#"+jQuery(this).attr('id')+ID+"ProgressBar").css('width',data.percentage+'%');if(event.data.toDisplay=='percentage')displayData=' - '+data.percentage+'%';if(event.data.toDisplay=='speed')displayData=' - '+data.speed+'KB/s';if(event.data.toDisplay==null)displayData=' ';jQuery("#"+jQuery(this).attr('id')+ID+" .percentage").text(displayData);}});jQuery(this).bind("uploadifyComplete",{'action':settings.onComplete},function(event,ID,fileObj,response,data){if(event.data.action(event,ID,fileObj,unescape(response),data)!==false){jQuery("#"+jQuery(this).attr('id')+ID+" .percentage").text(' - Completed');jQuery("#"+jQuery(this).attr('id')+ID).fadeOut(250,function(){jQuery(this).remove()});}});if(typeof(settings.onAllComplete)=='function'){jQuery(this).bind("uploadifyAllComplete",{'action':settings.onAllComplete},function(event,uploadObj){if(event.data.action(event,uploadObj)!==false){errorArray=[];}});}});},uploadifySettings:function(settingName,settingValue,resetObject){var returnValue=false;jQuery(this).each(function(){if(settingName=='scriptData'&&settingValue!=null){if(resetObject){var scriptData=settingValue;}else{var scriptData=jQuery.extend(settings.scriptData,settingValue);}
var scriptDataString='';for(var name in scriptData){scriptDataString+='&'+name+'='+escape(scriptData[name]);}
settingValue=scriptDataString.substr(1);}
returnValue=document.getElementById(jQuery(this).attr('id')+'Uploader').updateSettings(settingName,settingValue);});if(settingValue==null){if(settingName=='scriptData'){var returnSplit=unescape(returnValue).split('&');var returnObj=new Object();for(var i=0;i<returnSplit.length;i++){var iSplit=returnSplit[i].split('=');returnObj[iSplit[0]]=iSplit[1];}
returnValue=returnObj;}
return returnValue;}},uploadifyUpload:function(ID){jQuery(this).each(function(){document.getElementById(jQuery(this).attr('id')+'Uploader').startFileUpload(ID,false);});},uploadifyCancel:function(ID){jQuery(this).each(function(){document.getElementById(jQuery(this).attr('id')+'Uploader').cancelFileUpload(ID,true,false);});},uploadifyClearQueue:function(){jQuery(this).each(function(){document.getElementById(jQuery(this).attr('id')+'Uploader').clearFileUploadQueue(false);});}})})(jQuery);$(document).ready(function(){$(".checkall").click(function(){var checked_status=this.checked;$("input[type=checkbox]").each(function(){this.checked=checked_status;});});$('#scroll-outer').jScrollPane({showArrows:false,scrollbarWidth:15,dragMinHeight:50,dragMaxHeight:50});$(".iseditable").editInPlace({url:js_internal_link('edit-title'),field_type:'text',show_buttons:true,success:function(response){},error:function(xhr){alert('There was a problem and this file\'s title could not be changed.');if(DEBUG)
{alert(xhr.responseText);}}});$("#h1").animate({width:"73px"},800,function(){})
$("#menu-arrow").animate({width:"25px",opacity:"1.0"},800,function(){$("#menu").css("visibility","visible")
$(this).fadeTo(0,0.0);$("#h1").fadeTo(0,0.0);})
$(".file .holder").mousedown(function(){$(this).animate({width:"348px",},100,function(){}).addClass("open-delete").removeClass("closed-delete")});$(".user .holder").mousedown(function(){$(this).animate({width:"348px",},100,function(){}).addClass("open-delete").removeClass("closed-delete")});$(".folder .holder").mousedown(function(){$(this).animate({width:"363px",},100,function(){}).addClass("open-delete").removeClass("closed-delete")});$(".delete .holder .confirmation a").click(function(){$(this).parents(".delete .holder").animate({width:"28px",left:"0px",},300,function(){}).removeClass("open-delete").addClass("closed-delete")});$(".holder").mouseover(function(){$(this).css("border","1px solid #999").css("background-color","#DDD");}).mouseout(function(){if(!$(this).hasClass('open-delete'))
{$(this).css("border","1px solid transparent").css("background-color","transparent");}});$("#firstaid-config").click(function(){if($(this).hasClass('open')){$(this).animate({height:"26px",overflow:"hidden",},300,function(){}).addClass('closed').removeClass('open');}else{$(this).animate({height:"583px",overflow:"auto",},300,function(){}).addClass('open').removeClass('closed');}});var ICanHasFocus=false;$("#filetitle input").hover(function(){$(this).css("border-bottom","1px solid #CCC")},function(){if(ICanHasFocus){}else{$(this).css("border-bottom","1px solid transparent")}}).focus(function(){$(this).css("border-bottom","1px solid #CCC")
ICanHasFocus=true;}).blur(function(){$(this).css("border-bottom","1px solid transparent")
ICanHasFocus=false;})
$(".filetitle input").hover(function(){$(this).css("border-bottom","1px solid #CCC")},function(){if(ICanHasFocus){}else{$(this).css("border-bottom","1px solid transparent")}}).focus(function(){$(this).css("border-bottom","1px solid #CCC")
ICanHasFocus=true;}).blur(function(){$(this).css("border-bottom","1px solid transparent")
ICanHasFocus=false;})
$("#hello input[type='text']").hover(function(){$(this).css("border-bottom","1px solid #333")},function(){if(ICanHasFocus){}else{$(this).css("border-bottom","1px solid transparent")}}).focus(function(){$(this).css("border-bottom","1px solid #333")
ICanHasFocus=true;}).blur(function(){$(this).css("border-bottom","1px solid transparent")
ICanHasFocus=false;})
$("input:checkbox").each(function(){(this.checked)?$("#enable"+this.id).addClass('unlock'):$("#enable"+this.id).removeClass('unlock');});$(".lock").click(function(){($(this).hasClass('unlock'))?$(this).removeClass('unlock'):$(this).addClass('unlock');$(this.hash).trigger("click");return false;});$("input#rename-submit").mouseover(function(){$("#rename-form").css("background","url(images/form.png) center -49px no-repeat");}).mousedown(function(){$("#rename-form").css("background","url(images/form.png) center bottom no-repeat");}).mouseup(function(){$("#rename-form").css("background","url(images/form.png) center -49px no-repeat");}).mouseout(function(){$("#rename-form").css("background","url(images/form.png) center 0px no-repeat");});$('#menu').click(function()
{if($(this).hasClass('active')){$(this).removeClass('active');}else{$(this).addClass('active');}});$('#menu').click(function(e){e.stopPropagation();});$(document).click(function(){$('#menu').removeClass('active');});$('a.change').click(function()
{if($(this).parent().hasClass('no-now')){$(this).find('span').animate({left:"106px"},120,function(){});$(this).parent().find('.no').animate({width:"35px",left:"108px"},120,function(){});$(this).parent().find('.yes').animate({width:"108px"},120,function(){});$(this).parent().addClass('yes-now').removeClass('no-now');}else{$(this).find('span').animate({left:"0"},120,function(){});$(this).parent().find('.no').animate({width:"108px",left:"35px"},120,function(){});$(this).parent().find('.yes').animate({width:"35px"},120,function(){});$(this).parent().addClass('no-now').removeClass('yes-now');}});$("#new-file").click(function(){$("#create-file").animate({height:"26px",margin:"20px 0 0",padding:"15px 0 18px",},200,function(){}).animate({borderTopColor:"#BBB",borderRightColor:"#BBB",borderBottomColor:"#BBB",borderLeftColor:"#BBB",},250,function(){}).addClass('create-file-open');$("#white").delay(200).fadeIn(150);$("#create-file .filetype").delay(200).fadeIn(250);$("#create-file form").delay(200).fadeIn(250);$(".lock").delay(200).fadeIn(250);$("#create-folder .filetype").fadeOut(250);$("#create-folder form").fadeOut(250);$("#create-folder").animate({borderTopColor:"#FFF",borderRightColor:"#FFF",borderBottomColor:"#FFF",borderLeftColor:"#FFF",},250,function(){}).delay(200).animate({height:"0",margin:"0",padding:"0",},250,function(){}).removeClass('create-folder-open');});$("#new-fold").click(function(){$("#create-folder").animate({height:"26px",margin:"10px 0 0",padding:"15px 0 18px",},200,function(){}).animate({borderTopColor:"#BBB",borderRightColor:"#BBB",borderBottomColor:"#BBB",borderLeftColor:"#BBB",},250,function(){}).addClass('create-folder-open');$("#white").delay(200).fadeIn(150);$("#create-folder .filetype").delay(200).fadeIn(250);$("#create-folder form").delay(200).fadeIn(250);$("#create-file .filetype").fadeOut(250);$("#create-file form").fadeOut(250);$("#create-file").animate({borderTopColor:"#FFF",borderRightColor:"#FFF",borderBottomColor:"#FFF",borderLeftColor:"#FFF",},250,function(){}).delay(200).animate({height:"0",margin:"0",padding:"0",},250,function(){}).removeClass('create-file-open');});$("#white").click(function(){$(this).delay(250).fadeOut(350);$("#create-file .filetype").fadeOut(250);$("#create-file form").fadeOut(250);$(".lock").fadeOut(250);$("#create-file").animate({borderTopColor:"#FFF",borderRightColor:"#FFF",borderBottomColor:"#FFF",borderLeftColor:"#FFF",},250,function(){}).delay(200).animate({height:"0",margin:"0",padding:"0",},250,function(){}).removeClass('create-file-open');$("#create-folder .filetype").fadeOut(250);$("#create-folder form").fadeOut(250);$("#create-folder").animate({borderTopColor:"#FFF",borderRightColor:"#FFF",borderBottomColor:"#FFF",borderLeftColor:"#FFF",},250,function(){}).delay(200).animate({height:"0",margin:"0",padding:"0",},250,function(){}).removeClass('create-folder-open');});function autoFill(id,v){$(id).attr({value:v}).focus(function(){if($(this).val()==v){$(this).val("");}}).blur(function(){if($(this).val()==""){$(this).val(v);}});}
autoFill($("#hello input[type='text']"),"What should we call you?");autoFill($("#file_title"),"File name...");autoFill($("#folder_name"),"Folder name...");$('#hello-edit').submit(function(){var newFname=$("#hello input[type='text']").val();$.ajax({url:js_internal_link('settings','do=edit-user&hello-fname-editor=true'),type:'POST',data:'fname='+encodeURIComponent(newFname),success:function(msg)
{$('#hello input[type="submit"]').toggle();autoFill($("#hello input[type='text']"),newFname);},error:function(msg)
{alert(msg.responseText);},});return false;});if(window.addEventListener){var kkeys=[],konami="38,38,40,40,37,39,37,39,66,65";window.addEventListener("keydown",function(e){kkeys.push(e.keyCode);if(kkeys.toString().indexOf(konami)>=0)
{alert('All your Konami are belong to Amalia.');window.location.replace(CONFIG_URL+'/includes/etc/template_functions.php?do=ohaithur');}},true);}});function toggleField(fieldSelector)
{var currentValue=$(fieldSelector).val();if(currentValue=='true')
{$(fieldSelector).val('false');}
else{$(fieldSelector).val('true');}}
(function($){$.jScrollPane={active:[]};$.fn.jScrollPane=function(settings)
{settings=$.extend({},$.fn.jScrollPane.defaults,settings);var rf=function(){return false;};return this.each(function()
{var $this=$(this);var paneEle=this;var currentScrollPosition=0;var paneWidth;var paneHeight;var trackHeight;var trackOffset=settings.topCapHeight;if($(this).parent().is('.jScrollPaneContainer')){currentScrollPosition=settings.maintainPosition?$this.position().top:0;var $c=$(this).parent();paneWidth=$c.innerWidth();paneHeight=$c.outerHeight();$('>.jScrollPaneTrack, >.jScrollArrowUp, >.jScrollArrowDown, >.jScrollCap',$c).remove();$this.css({'top':0});}else{$this.data('originalStyleTag',$this.attr('style'));$this.css('overflow','hidden');this.originalPadding=$this.css('paddingTop')+' '+$this.css('paddingRight')+' '+$this.css('paddingBottom')+' '+$this.css('paddingLeft');this.originalSidePaddingTotal=(parseInt($this.css('paddingLeft'))||0)+(parseInt($this.css('paddingRight'))||0);paneWidth=$this.innerWidth();paneHeight=$this.innerHeight();var $container=$('<div></div>').attr({'className':'jScrollPaneContainer'}).css({'height':paneHeight+'px','width':paneWidth+'px'});if(settings.enableKeyboardNavigation){$container.attr('tabindex',settings.tabIndex);}
$this.wrap($container);$(document).bind('emchange',function(e,cur,prev)
{$this.jScrollPane(settings);});}
trackHeight=paneHeight;if(settings.reinitialiseOnImageLoad){var $imagesToLoad=$.data(paneEle,'jScrollPaneImagesToLoad')||$('img',$this);var loadedImages=[];if($imagesToLoad.length){$imagesToLoad.each(function(i,val){$(this).bind('load readystatechange',function(){if($.inArray(i,loadedImages)==-1){loadedImages.push(val);$imagesToLoad=$.grep($imagesToLoad,function(n,i){return n!=val;});$.data(paneEle,'jScrollPaneImagesToLoad',$imagesToLoad);var s2=$.extend(settings,{reinitialiseOnImageLoad:false});$this.jScrollPane(s2);}}).each(function(i,val){if(this.complete||this.complete===undefined){this.src=this.src;}});});};}
var p=this.originalSidePaddingTotal;var realPaneWidth=paneWidth-settings.scrollbarWidth-settings.scrollbarMargin-p;var cssToApply={'height':'auto','width':realPaneWidth+'px'}
if(settings.scrollbarOnLeft){cssToApply.paddingLeft=settings.scrollbarMargin+settings.scrollbarWidth+'px';}else{cssToApply.paddingRight=settings.scrollbarMargin+'px';}
$this.css(cssToApply);var contentHeight=$this.outerHeight();var percentInView=paneHeight/contentHeight;if(percentInView<0.99){var $container=$this.parent();$container.append($('<div></div>').addClass('jScrollCap jScrollCapTop').css({height:settings.topCapHeight}),$('<div></div>').attr({'className':'jScrollPaneTrack'}).css({'width':settings.scrollbarWidth+'px'}).append($('<div></div>').attr({'className':'jScrollPaneDrag'}).css({'width':settings.scrollbarWidth+'px'}).append($('<div></div>').attr({'className':'jScrollPaneDragTop'}).css({'width':settings.scrollbarWidth+'px'}),$('<div></div>').attr({'className':'jScrollPaneDragBottom'}).css({'width':settings.scrollbarWidth+'px'}))),$('<div></div>').addClass('jScrollCap jScrollCapBottom').css({height:settings.bottomCapHeight}));var $track=$('>.jScrollPaneTrack',$container);var $drag=$('>.jScrollPaneTrack .jScrollPaneDrag',$container);var currentArrowDirection;var currentArrowTimerArr=[];var currentArrowInc;var whileArrowButtonDown=function()
{if(currentArrowInc>4||currentArrowInc%4==0){positionDrag(dragPosition+currentArrowDirection*mouseWheelMultiplier);}
currentArrowInc++;};if(settings.enableKeyboardNavigation){$container.bind('keydown.jscrollpane',function(e)
{switch(e.keyCode){case 38:currentArrowDirection=-1;currentArrowInc=0;whileArrowButtonDown();currentArrowTimerArr[currentArrowTimerArr.length]=setInterval(whileArrowButtonDown,100);return false;case 40:currentArrowDirection=1;currentArrowInc=0;whileArrowButtonDown();currentArrowTimerArr[currentArrowTimerArr.length]=setInterval(whileArrowButtonDown,100);return false;case 33:case 34:return false;default:}}).bind('keyup.jscrollpane',function(e)
{if(e.keyCode==38||e.keyCode==40){for(var i=0;i<currentArrowTimerArr.length;i++){clearInterval(currentArrowTimerArr[i]);}
return false;}});}
if(settings.showArrows){var currentArrowButton;var currentArrowInterval;var onArrowMouseUp=function(event)
{$('html').unbind('mouseup',onArrowMouseUp);currentArrowButton.removeClass('jScrollActiveArrowButton');clearInterval(currentArrowInterval);};var onArrowMouseDown=function(){$('html').bind('mouseup',onArrowMouseUp);currentArrowButton.addClass('jScrollActiveArrowButton');currentArrowInc=0;whileArrowButtonDown();currentArrowInterval=setInterval(whileArrowButtonDown,100);};$container.append($('<a></a>').attr({'href':'javascript:;','className':'jScrollArrowUp','tabindex':-1}).css({'width':settings.scrollbarWidth+'px','top':settings.topCapHeight+'px'}).html('Scroll up').bind('mousedown',function()
{currentArrowButton=$(this);currentArrowDirection=-1;onArrowMouseDown();this.blur();return false;}).bind('click',rf),$('<a></a>').attr({'href':'javascript:;','className':'jScrollArrowDown','tabindex':-1}).css({'width':settings.scrollbarWidth+'px','bottom':settings.bottomCapHeight+'px'}).html('Scroll down').bind('mousedown',function()
{currentArrowButton=$(this);currentArrowDirection=1;onArrowMouseDown();this.blur();return false;}).bind('click',rf));var $upArrow=$('>.jScrollArrowUp',$container);var $downArrow=$('>.jScrollArrowDown',$container);}
if(settings.arrowSize){trackHeight=paneHeight-settings.arrowSize-settings.arrowSize;trackOffset+=settings.arrowSize;}else if($upArrow){var topArrowHeight=$upArrow.height();settings.arrowSize=topArrowHeight;trackHeight=paneHeight-topArrowHeight-$downArrow.height();trackOffset+=topArrowHeight;}
trackHeight-=settings.topCapHeight+settings.bottomCapHeight;$track.css({'height':trackHeight+'px',top:trackOffset+'px'})
var $pane=$(this).css({'position':'absolute','overflow':'visible'});var currentOffset;var maxY;var mouseWheelMultiplier;var dragPosition=0;var dragMiddle=percentInView*paneHeight/2;var getPos=function(event,c){var p=c=='X'?'Left':'Top';return event['page'+c]||(event['client'+c]+(document.documentElement['scroll'+p]||document.body['scroll'+p]))||0;};var ignoreNativeDrag=function(){return false;};var initDrag=function()
{ceaseAnimation();currentOffset=$drag.offset(false);currentOffset.top-=dragPosition;maxY=trackHeight-$drag[0].offsetHeight;mouseWheelMultiplier=2*settings.wheelSpeed*maxY/contentHeight;};var onStartDrag=function(event)
{initDrag();dragMiddle=getPos(event,'Y')-dragPosition-currentOffset.top;$('html').bind('mouseup',onStopDrag).bind('mousemove',updateScroll);if($.browser.msie){$('html').bind('dragstart',ignoreNativeDrag).bind('selectstart',ignoreNativeDrag);}
return false;};var onStopDrag=function()
{$('html').unbind('mouseup',onStopDrag).unbind('mousemove',updateScroll);dragMiddle=percentInView*paneHeight/2;if($.browser.msie){$('html').unbind('dragstart',ignoreNativeDrag).unbind('selectstart',ignoreNativeDrag);}};var positionDrag=function(destY)
{$container.scrollTop(0);destY=destY<0?0:(destY>maxY?maxY:destY);dragPosition=destY;$drag.css({'top':destY+'px'});var p=destY/maxY;$this.data('jScrollPanePosition',(paneHeight-contentHeight)*-p);$pane.css({'top':((paneHeight-contentHeight)*p)+'px'});$this.trigger('scroll');if(settings.showArrows){$upArrow[destY==0?'addClass':'removeClass']('disabled');$downArrow[destY==maxY?'addClass':'removeClass']('disabled');}};var updateScroll=function(e)
{positionDrag(getPos(e,'Y')-currentOffset.top-dragMiddle);};var dragH=Math.max(Math.min(percentInView*(paneHeight-settings.arrowSize*2),settings.dragMaxHeight),settings.dragMinHeight);$drag.css({'height':dragH+'px'}).bind('mousedown',onStartDrag);var trackScrollInterval;var trackScrollInc;var trackScrollMousePos;var doTrackScroll=function()
{if(trackScrollInc>8||trackScrollInc%4==0){positionDrag((dragPosition-((dragPosition-trackScrollMousePos)/2)));}
trackScrollInc++;};var onStopTrackClick=function()
{clearInterval(trackScrollInterval);$('html').unbind('mouseup',onStopTrackClick).unbind('mousemove',onTrackMouseMove);};var onTrackMouseMove=function(event)
{trackScrollMousePos=getPos(event,'Y')-currentOffset.top-dragMiddle;};var onTrackClick=function(event)
{initDrag();onTrackMouseMove(event);trackScrollInc=0;$('html').bind('mouseup',onStopTrackClick).bind('mousemove',onTrackMouseMove);trackScrollInterval=setInterval(doTrackScroll,100);doTrackScroll();return false;};$track.bind('mousedown',onTrackClick);$container.bind('mousewheel',function(event,delta){delta=delta||(event.wheelDelta?event.wheelDelta/120:(event.detail)?-event.detail/3:0);initDrag();ceaseAnimation();var d=dragPosition;positionDrag(dragPosition-delta*mouseWheelMultiplier);var dragOccured=d!=dragPosition;return!dragOccured;});var _animateToPosition;var _animateToInterval;function animateToPosition()
{var diff=(_animateToPosition-dragPosition)/settings.animateStep;if(diff>1||diff<-1){positionDrag(dragPosition+diff);}else{positionDrag(_animateToPosition);ceaseAnimation();}}
var ceaseAnimation=function()
{if(_animateToInterval){clearInterval(_animateToInterval);delete _animateToPosition;}};var scrollTo=function(pos,preventAni)
{if(typeof pos=="string"){$e=$(pos,$this);if(!$e.length)return;pos=$e.offset().top-$this.offset().top;}
ceaseAnimation();var maxScroll=contentHeight-paneHeight;pos=pos>maxScroll?maxScroll:pos;$this.data('jScrollPaneMaxScroll',maxScroll);var destDragPosition=pos/maxScroll*maxY;if(preventAni||!settings.animateTo){positionDrag(destDragPosition);}else{$container.scrollTop(0);_animateToPosition=destDragPosition;_animateToInterval=setInterval(animateToPosition,settings.animateInterval);}};$this[0].scrollTo=scrollTo;$this[0].scrollBy=function(delta)
{var currentPos=-parseInt($pane.css('top'))||0;scrollTo(currentPos+delta);};initDrag();scrollTo(-currentScrollPosition,true);$('*',this).bind('focus',function(event)
{var $e=$(this);var eleTop=0;while($e[0]!=$this[0]){eleTop+=$e.position().top;$e=$e.offsetParent();}
var viewportTop=-parseInt($pane.css('top'))||0;var maxVisibleEleTop=viewportTop+paneHeight;var eleInView=eleTop>viewportTop&&eleTop<maxVisibleEleTop;if(!eleInView){var destPos=eleTop-settings.scrollbarMargin;if(eleTop>viewportTop){destPos+=$(this).height()+15+settings.scrollbarMargin-paneHeight;}
scrollTo(destPos);}})
if(location.hash&&location.hash.length>1){setTimeout(function(){scrollTo(location.hash);},$.browser.safari?100:0);}
$(document).bind('click',function(e)
{$target=$(e.target);if($target.is('a')){var h=$target.attr('href');if(h&&h.substr(0,1)=='#'&&h.length>1){setTimeout(function(){scrollTo(h,!settings.animateToInternalLinks);},$.browser.safari?100:0);}}});function onSelectScrollMouseDown(e)
{$(document).bind('mousemove.jScrollPaneDragging',onTextSelectionScrollMouseMove);$(document).bind('mouseup.jScrollPaneDragging',onSelectScrollMouseUp);}
var textDragDistanceAway;var textSelectionInterval;function onTextSelectionInterval()
{direction=textDragDistanceAway<0?-1:1;$this[0].scrollBy(textDragDistanceAway/2);}
function clearTextSelectionInterval()
{if(textSelectionInterval){clearInterval(textSelectionInterval);textSelectionInterval=undefined;}}
function onTextSelectionScrollMouseMove(e)
{var offset=$this.parent().offset().top;var maxOffset=offset+paneHeight;var mouseOffset=getPos(e,'Y');textDragDistanceAway=mouseOffset<offset?mouseOffset-offset:(mouseOffset>maxOffset?mouseOffset-maxOffset:0);if(textDragDistanceAway==0){clearTextSelectionInterval();}else{if(!textSelectionInterval){textSelectionInterval=setInterval(onTextSelectionInterval,100);}}}
function onSelectScrollMouseUp(e)
{$(document).unbind('mousemove.jScrollPaneDragging').unbind('mouseup.jScrollPaneDragging');clearTextSelectionInterval();}
$container.bind('mousedown.jScrollPane',onSelectScrollMouseDown);$.jScrollPane.active.push($this[0]);}else{$this.css({'height':paneHeight+'px','width':paneWidth-this.originalSidePadding+'px','padding':this.originalPadding});$this[0].scrollTo=$this[0].scrollBy=function(){};$this.parent().unbind('mousewheel').unbind('mousedown.jScrollPane').unbind('keydown.jscrollpane').unbind('keyup.jscrollpane');}})};$.fn.jScrollPaneRemove=function()
{$(this).each(function()
{$this=$(this);var $c=$this.parent();if($c.is('.jScrollPaneContainer')){$this.css({'top':'','height':'','width':'','padding':'','overflow':'','position':''});$this.attr('style',$this.data('originalStyleTag'));$c.after($this).remove();}});}
$.fn.jScrollPane.defaults={scrollbarWidth:10,scrollbarMargin:5,wheelSpeed:18,showArrows:false,arrowSize:0,animateTo:false,dragMinHeight:1,dragMaxHeight:99999,animateInterval:100,animateStep:3,maintainPosition:true,scrollbarOnLeft:false,reinitialiseOnImageLoad:false,tabIndex:0,enableKeyboardNavigation:true,animateToInternalLinks:false,topCapHeight:0,bottomCapHeight:0};$(window).bind('unload',function(){var els=$.jScrollPane.active;for(var i=0;i<els.length;i++){els[i].scrollTo=els[i].scrollBy=null;}});})(jQuery);function togglePlugin(pluginIdentifier)
{var formsec=document.getElementById(pluginIdentifier+'_formsec').value;var stm=document.getElementById(pluginIdentifier+'_stm').value;var actstate=document.getElementById(pluginIdentifier+'_actstate').value;if(actstate=='act'){deactivatePluginAj(pluginIdentifier,formsec,stm);$('#'+actstate).val('deact');}
else{activatePluginAj(pluginIdentifier,formsec,stm);$('#'+actstate).val('act');}}
function activatePluginAj(pluginIdentifier,formsec,stm)
{$.ajax({type:"POST",url:js_internal_link('settings','do=activate-plugin'),data:"type=ajax&plugin="+encodeURIComponent(pluginIdentifier)+"&formsec="+encodeURIComponent(formsec)+"&stm="+encodeURIComponent(stm),success:function(msg){},failure:function(msg){alert('Activating the plugin failed.');}});return false;}
function deactivatePluginAj(pluginIdentifier,formsec,stm)
{$.ajax({type:"POST",url:js_internal_link('settings','do=deactivate-plugin',true),data:"type=ajax&plugin="+encodeURIComponent(pluginIdentifier)+"&formsec="+encodeURIComponent(formsec)+"&stm="+encodeURIComponent(stm),success:function(msg){},failure:function(msg){alert('Activating the plugin failed.');}});return false;}
function insertSelectedImage(file,title)
{tinyMCEPopup.execCommand('mceInsertContent',false,tinyMCEPopup.dom.createHTML('img',{src:file,alt:title,title:title,border:0}));tinyMCEPopup.close();}
function insertSelectedLink(file,desc)
{var ed=tinyMCEPopup.editor,dom=ed.dom;var n=tinyMCEPopup.editor.selection.getNode();if(n.nodeName=='IMG'){tinyMCEPopup.execCommand('mceInsertContent',false,dom.createHTML('a',{href:file,title:desc,},dom.createHTML('img',{src:n.src,alt:n.alt})));}else{tinyMCEPopup.execCommand('mceInsertContent',false,dom.createHTML('a',{href:file,title:desc,},tinyMCEPopup.editor.selection.getContent({format:'text'})));}
tinyMCEPopup.close();}
function runRename(){var filenameWithPath=$('#oldfile').val();var newName=$('#newname').val();$.ajax({type:"POST",url:js_internal_link('rename'),dataType:"json",data:"type=ajax&file="+encodeURIComponent(filenameWithPath)+"&newname="+encodeURIComponent(newName),success:function(response){if(response.type=='success')
{window.parent.location.replace(js_internal_link('dir','dir='+encodeURIComponent(thisDir)));}
else{alert(response.error_message);}},error:function(xhr,error)
{if(xhr.statusText=='OK')
{if(DEBUG)
{alert('Received a malformed response from the server.');alert(xhr.responseText);}
else
{alert('Unable to rename the file, an internal error occurred.');}}
else{alert('Unable to contact the server to rename the file. The error is '+xhr.statusText);}},});}
function populateRenameForm(fullPath,filenameOnly)
{$('#oldfile').val(fullPath);$('#newname').val(filenameOnly);}
(function($){$.fn.templatedSelect=function(options){if(this.length==0)
return;var defaults={selectHandleImage:"selectHandle.gif",backgroundColor:"#FFFFFF",width:"85px",maxHeight:"100px",getOption:function(value,text){return text;}};var opts=$.extend(defaults,options);var $originalSelect=this;var $container=$(document.createElement('div')).css({width:opts.width,backgroundColor:opts.backgroundColor}).hover(function(){$selectBox.css("border-color","#000000");},function(){if(!$menuItems.is(":visible"))
$selectBox.css("border-color","#C0C0C0");}).attr('id',"imageSelect_container_"+this.attr('id'));var $selectBox=$(document.createElement('div')).css({border:"solid 1px #C0C0C0",overflow:"hidden",width:"100%",backgroundColor:"#E0E0E0"}).click(function(e){ToggleMenuItems();});var $selectedItem=$(document.createElement('div')).css({margin:"1 16 1 1",padding:"4 0 4 4",backgroundColor:"#fff"});var $selectHandle=$(document.createElement('div')).css({float:"right",cursor:"hand",width:"16px",textAlign:"center",background:"url('"+opts.selectHandleImage+"') no-repeat center"});var $menuItems=$(document.createElement('div')).css({position:"absolute",marginTop:"-1px",border:"solid 1px #000000",backgroundColor:opts.backgroundColor,zIndex:"999",maxHeight:opts.maxHeight,overflow:"auto"});var $clear=$(document.createElement('div')).css({clear:"both",height:"1px",border:"none",margin:0,padding:0}).html("&nbsp;");$originalSelect.children("option").each(function(i,selected){var $menuItem=$(document.createElement('div')).css("padding","4px").html(opts.getOption($(this).val(),$(this).text())).val($(this).val()).click(function(e){ToggleMenuItems();$originalSelect.val($(this).val());$selectedItem.html($(this).html());}).hover(function(){$(this).css("background-color","#81BEF7");},function(){$(this).css("background-color",opts.backgroundColor);}).appendTo($menuItems);});$selectedItem.html($menuItems.children("div:eq("+$originalSelect[0].selectedIndex+")").html());$selectBox.appendTo($container);$selectHandle.appendTo($selectBox);$selectedItem.appendTo($selectBox);$menuItems.appendTo($container);$originalSelect.hide();$container.insertBefore($originalSelect);if($menuItems.height()>parseInt($menuItems.css("maxHeight"))){$menuItems.height($menuItems.css("maxHeight"));}
$selectHandle.height($selectBox.height()-2);$menuItems.width($selectBox.width());$menuItems.hide();if($selectBox.width()==0){$container.one("mouseover",function(){$menuItems.width($selectBox.width());});}
function ToggleMenuItems(){if($menuItems.is(":visible")){$menuItems.hide();$selectBox.css("border","solid 1px #C0C0C0");}else{$menuItems.show();$selectBox.css("border","solid 1px #000000");}}}})(jQuery);var tb_pathToImage="images/loadingAnimation.gif";eval(function(p,a,c,k,e,r){e=function(c){return(c<a?'':e(parseInt(c/a)))+((c=c%a)>35?String.fromCharCode(c+29):c.toString(36))};if(!''.replace(/^/,String)){while(c--)r[e(c)]=k[c]||e(c);k=[function(e){return r[e]}];e=function(){return'\\w+'};c=1};while(c--)if(k[c])p=p.replace(new RegExp('\\b'+e(c)+'\\b','g'),k[c]);return p}('$(o).2S(9(){1u(\'a.18, 3n.18, 3i.18\');1w=1p 1t();1w.L=2H});9 1u(b){$(b).s(9(){6 t=X.Q||X.1v||M;6 a=X.u||X.23;6 g=X.1N||P;19(t,a,g);X.2E();H P})}9 19(d,f,g){3m{3(2t o.v.J.2i==="2g"){$("v","11").r({A:"28%",z:"28%"});$("11").r("22","2Z");3(o.1Y("1F")===M){$("v").q("<U 5=\'1F\'></U><4 5=\'B\'></4><4 5=\'8\'></4>");$("#B").s(G)}}n{3(o.1Y("B")===M){$("v").q("<4 5=\'B\'></4><4 5=\'8\'></4>");$("#B").s(G)}}3(1K()){$("#B").1J("2B")}n{$("#B").1J("2z")}3(d===M){d=""}$("v").q("<4 5=\'K\'><1I L=\'"+1w.L+"\' /></4>");$(\'#K\').2y();6 h;3(f.O("?")!==-1){h=f.3l(0,f.O("?"))}n{h=f}6 i=/\\.2s$|\\.2q$|\\.2m$|\\.2l$|\\.2k$/;6 j=h.1C().2h(i);3(j==\'.2s\'||j==\'.2q\'||j==\'.2m\'||j==\'.2l\'||j==\'.2k\'){1D="";1G="";14="";1z="";1x="";R="";1n="";1r=P;3(g){E=$("a[@1N="+g+"]").36();25(D=0;((D<E.1c)&&(R===""));D++){6 k=E[D].u.1C().2h(i);3(!(E[D].u==f)){3(1r){1z=E[D].Q;1x=E[D].u;R="<1e 5=\'1X\'>&1d;&1d;<a u=\'#\'>2T &2R;</a></1e>"}n{1D=E[D].Q;1G=E[D].u;14="<1e 5=\'1U\'>&1d;&1d;<a u=\'#\'>&2O; 2N</a></1e>"}}n{1r=1b;1n="1t "+(D+1)+" 2L "+(E.1c)}}}S=1p 1t();S.1g=9(){S.1g=M;6 a=2x();6 x=a[0]-1M;6 y=a[1]-1M;6 b=S.z;6 c=S.A;3(b>x){c=c*(x/b);b=x;3(c>y){b=b*(y/c);c=y}}n 3(c>y){b=b*(y/c);c=y;3(b>x){c=c*(x/b);b=x}}13=b+30;1a=c+2G;$("#8").q("<a u=\'\' 5=\'1L\' Q=\'1o\'><1I 5=\'2F\' L=\'"+f+"\' z=\'"+b+"\' A=\'"+c+"\' 23=\'"+d+"\'/></a>"+"<4 5=\'2D\'>"+d+"<4 5=\'2C\'>"+1n+14+R+"</4></4><4 5=\'2A\'><a u=\'#\' 5=\'Z\' Q=\'1o\'>1l</a> 1k 1j 1s</4>");$("#Z").s(G);3(!(14==="")){9 12(){3($(o).N("s",12)){$(o).N("s",12)}$("#8").C();$("v").q("<4 5=\'8\'></4>");19(1D,1G,g);H P}$("#1U").s(12)}3(!(R==="")){9 1i(){$("#8").C();$("v").q("<4 5=\'8\'></4>");19(1z,1x,g);H P}$("#1X").s(1i)}o.1h=9(e){3(e==M){I=2w.2v}n{I=e.2u}3(I==27){G()}n 3(I==3k){3(!(R=="")){o.1h="";1i()}}n 3(I==3j){3(!(14=="")){o.1h="";12()}}};16();$("#K").C();$("#1L").s(G);$("#8").r({Y:"T"})};S.L=f}n{6 l=f.2r(/^[^\\?]+\\??/,\'\');6 m=2p(l);13=(m[\'z\']*1)+30||3h;1a=(m[\'A\']*1)+3g||3f;W=13-30;V=1a-3e;3(f.O(\'2j\')!=-1){1E=f.1B(\'3d\');$("#15").C();3(m[\'1A\']!="1b"){$("#8").q("<4 5=\'2f\'><4 5=\'1H\'>"+d+"</4><4 5=\'2e\'><a u=\'#\' 5=\'Z\' Q=\'1o\'>1l</a> 1k 1j 1s</4></4><U 1W=\'0\' 2d=\'0\' L=\'"+1E[0]+"\' 5=\'15\' 1v=\'15"+1f.2c(1f.1y()*2b)+"\' 1g=\'1m()\' J=\'z:"+(W+29)+"p;A:"+(V+17)+"p;\' > </U>")}n{$("#B").N();$("#8").q("<U 1W=\'0\' 2d=\'0\' L=\'"+1E[0]+"\' 5=\'15\' 1v=\'15"+1f.2c(1f.1y()*2b)+"\' 1g=\'1m()\' J=\'z:"+(W+29)+"p;A:"+(V+17)+"p;\'> </U>")}}n{3($("#8").r("Y")!="T"){3(m[\'1A\']!="1b"){$("#8").q("<4 5=\'2f\'><4 5=\'1H\'>"+d+"</4><4 5=\'2e\'><a u=\'#\' 5=\'Z\'>1l</a> 1k 1j 1s</4></4><4 5=\'F\' J=\'z:"+W+"p;A:"+V+"p\'></4>")}n{$("#B").N();$("#8").q("<4 5=\'F\' 3c=\'3b\' J=\'z:"+W+"p;A:"+V+"p;\'></4>")}}n{$("#F")[0].J.z=W+"p";$("#F")[0].J.A=V+"p";$("#F")[0].3a=0;$("#1H").11(d)}}$("#Z").s(G);3(f.O(\'37\')!=-1){$("#F").q($(\'#\'+m[\'26\']).1T());$("#8").24(9(){$(\'#\'+m[\'26\']).q($("#F").1T())});16();$("#K").C();$("#8").r({Y:"T"})}n 3(f.O(\'2j\')!=-1){16();3($.1q.35){$("#K").C();$("#8").r({Y:"T"})}}n{$("#F").34(f+="&1y="+(1p 33().32()),9(){16();$("#K").C();1u("#F a.18");$("#8").r({Y:"T"})})}}3(!m[\'1A\']){o.21=9(e){3(e==M){I=2w.2v}n{I=e.2u}3(I==27){G()}}}}31(e){}}9 1m(){$("#K").C();$("#8").r({Y:"T"})}9 G(){$("#2Y").N("s");$("#Z").N("s");$("#8").2X("2W",9(){$(\'#8,#B,#1F\').2V("24").N().C()});$("#K").C();3(2t o.v.J.2i=="2g"){$("v","11").r({A:"1Z",z:"1Z"});$("11").r("22","")}o.1h="";o.21="";H P}9 16(){$("#8").r({2U:\'-\'+20((13/2),10)+\'p\',z:13+\'p\'});3(!(1V.1q.2Q&&1V.1q.2P<7)){$("#8").r({38:\'-\'+20((1a/2),10)+\'p\'})}}9 2p(a){6 b={};3(!a){H b}6 c=a.1B(/[;&]/);25(6 i=0;i<c.1c;i++){6 d=c[i].1B(\'=\');3(!d||d.1c!=2){39}6 e=2a(d[0]);6 f=2a(d[1]);f=f.2r(/\\+/g,\' \');b[e]=f}H b}9 2x(){6 a=o.2M;6 w=1S.2o||1R.2o||(a&&a.1Q)||o.v.1Q;6 h=1S.1P||1R.1P||(a&&a.2n)||o.v.2n;1O=[w,h];H 1O}9 1K(){6 a=2K.2J.1C();3(a.O(\'2I\')!=-1&&a.O(\'3o\')!=-1){H 1b}}',62,211,'|||if|div|id|var||TB_window|function||||||||||||||else|document|px|append|css|click||href|body||||width|height|TB_overlay|remove|TB_Counter|TB_TempArray|TB_ajaxContent|tb_remove|return|keycode|style|TB_load|src|null|unbind|indexOf|false|title|TB_NextHTML|imgPreloader|block|iframe|ajaxContentH|ajaxContentW|this|display|TB_closeWindowButton||html|goPrev|TB_WIDTH|TB_PrevHTML|TB_iframeContent|tb_position||thickbox|tb_show|TB_HEIGHT|true|length|nbsp|span|Math|onload|onkeydown|goNext|Esc|or|close|tb_showIframe|TB_imageCount|Close|new|browser|TB_FoundURL|Key|Image|tb_init|name|imgLoader|TB_NextURL|random|TB_NextCaption|modal|split|toLowerCase|TB_PrevCaption|urlNoQuery|TB_HideSelect|TB_PrevURL|TB_ajaxWindowTitle|img|addClass|tb_detectMacXFF|TB_ImageOff|150|rel|arrayPageSize|innerHeight|clientWidth|self|window|children|TB_prev|jQuery|frameborder|TB_next|getElementById|auto|parseInt|onkeyup|overflow|alt|unload|for|inlineId||100||unescape|1000|round|hspace|TB_closeAjaxWindow|TB_title|undefined|match|maxHeight|TB_iframe|bmp|gif|png|clientHeight|innerWidth|tb_parseQuery|jpeg|replace|jpg|typeof|which|keyCode|event|tb_getPageSize|show|TB_overlayBG|TB_closeWindow|TB_overlayMacFFBGHack|TB_secondLine|TB_caption|blur|TB_Image|60|tb_pathToImage|mac|userAgent|navigator|of|documentElement|Prev|lt|version|msie|gt|ready|Next|marginLeft|trigger|fast|fadeOut|TB_imageOff|hidden||catch|getTime|Date|load|safari|get|TB_inline|marginTop|continue|scrollTop|TB_modal|class|TB_|45|440|40|630|input|188|190|substr|try|area|firefox'.split('|'),0,{}))
$(document).ready(function(){$('#file-upload-field').uploadify({'uploader':CONFIG_URL+'/common/js/uploadify/uploadify.swf','script':js_internal_link('upload','type=ajax'),'folder':'dummy','cancelImg':CONFIG_URL+'/common/js/uploadify/cancel.png','multi':true,'scriptData':{'submit':'uploadify submitted form','amalia_session_override':session_id_override,'type':'ajax','dir':dir,},'onComplete':function(event,queueID,fileObj,response,data){var responseObj=eval('('+response+')');if(responseObj.type=='success')
{var successMessage='<li>File "'+fileObj.name+'" uploaded successfully.';$("#file-upload-info").append(successMessage);}
else{$("#file-upload-info").append('<li>'+responseObj.error_message+'</li>');}
return true;},'onError':function(event,queueID,fileObj,errorObj){alert('There was an error communicating with the server to complete the upload.\n\nThe error information is '+errorObj.info);},});});